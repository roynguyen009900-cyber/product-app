<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<body>
    <div th:fragment="deleteDialog">
        <wa-dialog id="delete-dialog" label="Delete Product">
            <wa-icon slot="header-icon" name="exclamation-triangle-fill"
                style="color: var(--wa-color-danger-500); font-size: 1.2rem;"></wa-icon>
            <div class="delete-dialog-body">
                <p>Are you sure you want to delete <strong id="delete-product-name"></strong>? This action cannot be
                    undone.</p>
            </div>
            <div slot="footer" class="delete-dialog-actions">
                <wa-button variant="neutral" data-dialog="close">
                    Cancel
                </wa-button>
                <wa-button id="confirm-delete-btn" variant="danger" hx-swap="innerHTML"
                    hx-target="#product-table-container"
                    hx-on:htmx:after-request="if(event.detail.successful) { this.closest('wa-dialog').open = false; }">
                    <wa-icon slot="prefix" name="trash"></wa-icon>
                    Delete
                </wa-button>
            </div>
        </wa-dialog>

        <script>
            function openDeleteDialog(productId, productName) {
                const dialog = document.getElementById('delete-dialog');
                document.getElementById('delete-product-name').textContent = productName;
                const confirmBtn = document.getElementById('confirm-delete-btn');
                confirmBtn.setAttribute('hx-delete', '/products/' + productId);
                htmx.process(confirmBtn)
                dialog.show();
            }
        </script>
    </div>
</body>

</html>